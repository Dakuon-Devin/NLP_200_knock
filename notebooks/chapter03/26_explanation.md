# 問題26: 強調マークアップの除去 - 解説

## 問題の概要
この問題では、Wikipediaの記事から抽出した基礎情報テンプレートの値から、MediaWikiの強調マークアップを除去する処理を実装します。

## MediaWikiの強調マークアップの種類
MediaWikiでは、以下の3種類の強調マークアップが使用されています：

1. **弱い強調**：`''テキスト''`（2つのアポストロフィで囲む）
   - HTMLでは `<i>テキスト</i>` に変換され、通常は斜体で表示されます。

2. **強い強調**：`'''テキスト'''`（3つのアポストロフィで囲む）
   - HTMLでは `<b>テキスト</b>` に変換され、通常は太字で表示されます。

3. **強い強調かつ斜体**：`'''''テキスト'''''`（5つのアポストロフィで囲む）
   - HTMLでは `<b><i>テキスト</i></b>` に変換され、通常は太字かつ斜体で表示されます。

## 解法のポイント

### 1. 正規表現を使用した強調マークアップの除去
強調マークアップを除去するには、正規表現の置換機能を使用します。重要なのは、処理の順序です。最も長いパターン（5つのアポストロフィ）から順に処理することで、短いパターンが長いパターンの一部として誤って処理されることを防ぎます。

```python
# 強い強調かつ斜体（5つのアポストロフィ）
text = re.sub(r"'''''(.+?)'''''", r"\1", text)

# 強い強調（3つのアポストロフィ）
text = re.sub(r"'''(.+?)'''", r"\1", text)

# 弱い強調（2つのアポストロフィ）
text = re.sub(r"''(.+?)''", r"\1", text)
```

### 2. 非貪欲マッチングの使用
正規表現の `(.+?)` は非貪欲（non-greedy）マッチングを行います。これにより、最初のマッチングで終了し、複数の強調マークアップが連続している場合でも適切に処理できます。

### 3. 基礎情報テンプレートへの適用
問題25で抽出した基礎情報テンプレートの各フィールドの値に対して、強調マークアップ除去の処理を適用します。

```python
def remove_emphasis_from_template(basic_info):
    cleaned_info = {}
    for name, value in basic_info.items():
        cleaned_info[name] = remove_emphasis_markup(value)
    
    return cleaned_info
```

## 実装上の注意点

1. **入れ子になった強調マークアップ**：
   強調マークアップが入れ子になっている場合（例：`'''''テキスト'''''` の中に `''テキスト''` がある場合）、複数回の置換が必要になることがあります。

2. **複雑な組み合わせ**：
   実際のWikipediaの記事では、強調マークアップが複雑に組み合わされている場合があります。

3. **他のマークアップとの相互作用**：
   強調マークアップは他のマークアップ（リンクなど）と組み合わせて使用されることがあります。これらの相互作用を考慮する必要があります。

## 発展的な内容
この問題は、次の問題（問題27）で内部リンクマークアップの除去と組み合わせることになります。両方のマークアップを適切に処理することで、より読みやすいテキストを抽出できます。
